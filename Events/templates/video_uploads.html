{% extends 'account/base.html' %}
{% block content %}

<h1><a href="">{{ event.title }}</a></h1>
{% for upload in video_uploads %}

    <div class='post'>
       <div class='date'>
            <p>published : {{ upload.created }} by {{ upload.user }}</p>
        </div>



 <video id="my-audio" width="400" preload="auto" controls poster="\media\brick.jpg">
  <source src="{{ upload.video.url }}" type="video/mp4">
 <source
    src="{{ upload.video.url }}"
    type="video/webm">

<source
    src="{{ upload.video.url }}"
    type="video/ogg">
  Your browser doesn't support HTML5 video tag.
</video>

<script>

window.onload = function(){

  var myAudio = document.getElementById('my-audio');

  myAudio.addEventListener('progress', function() {
    var duration =  myAudio.duration;
    if (duration > 0) {
      for (var i = 0; i < myAudio.buffered.length; i++) {
            if (myAudio.buffered.start(myAudio.buffered.length - 1 - i) < myAudio.currentTime) {
                document.getElementById("buffered-amount").style.width = (myAudio.buffered.end(myAudio.buffered.length - 1 - i) / duration) * 100 + "%";
                break;
            }
        }
    }
  });

  myAudio.addEventListener('timeupdate', function() {
    var duration =  myAudio.duration;
    if (duration > 0) {
      document.getElementById('progress-amount').style.width = ((myAudio.currentTime / duration)*100) + "%";
    }
  });
}

</script>
 </div>
   {% empty %}

        <p>There are no video uploads yet!!!!</p>

{% endfor %}


{% endblock content %}

